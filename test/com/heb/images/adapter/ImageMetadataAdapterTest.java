package com.heb.images.adapter;

import com.google.common.collect.ImmutableMap;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.TestInstance;

import java.util.HashMap;
import java.util.Map;

import static org.junit.jupiter.api.Assertions.*;

@TestInstance(TestInstance.Lifecycle.PER_CLASS)
class ImageMetadataAdapterTest {

    private ImageMetadataAdapter toTest;

    private String IMAGE_BASE_64 = "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";

    @BeforeAll
    void setUp() {
        toTest = new ImageMetadataAdapter();
    }

    @Test
    void extractMetadata() {
        // ensure IMAGE_BASE_64 is iin fact Base64
        assertTrue(IMAGE_BASE_64.matches("^(([\\w+/]{4}){19}\r\n)*(([\\w+/]{4})*([\\w+/]{4}|[\\w+/]{3}=|[\\w+/]{2}==))$"));

        Map<String, String> expected = new HashMap<>();
        expected.put("[JPEG] Data Precision","8 bits");
        expected.put("[JPEG] Image Height","167 pixels");
        expected.put("[Huffman] Number of Tables","4 Huffman tables");
        expected.put("[JFIF] Version","1.1");
        expected.put("[JPEG] Component 1","Y component: Quantization table 0, Sampling factors 2 horiz/2 vert");
        expected.put("[JPEG] Component 2","Cb component: Quantization table 1, Sampling factors 1 horiz/1 vert");
        expected.put("[JPEG] Component 3","Cr component: Quantization table 1, Sampling factors 1 horiz/1 vert");
        expected.put("[JFIF] Y Resolution","1 dot");
        expected.put("[File Type] Detected File Type Long Name","Joint Photographic Experts Group");
        expected.put("[File Type] Expected File Name Extension","jpg");
        expected.put("[JPEG] Number of Components","3");
        expected.put("[JPEG] Image Width","302 pixels");
        expected.put("[File Type] Detected File Type Name","JPEG");
        expected.put("[JFIF] Thumbnail Width Pixels","0");
        expected.put("[JFIF] X Resolution","1 dot");
        expected.put("[File Type] Detected MIME Type","image/jpeg");
        expected.put("[JPEG] Compression Type","Baseline");
        expected.put("[JFIF] Thumbnail Height Pixels","0");
        expected.put("[JFIF] Resolution Units","none");
        Map<String, String> result = toTest.extractMetadata(IMAGE_BASE_64);
        assertEquals(expected, result);
    }
}